"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_app_authenticated-user_authenticated-user_module_ts"],{4666:(X,F,i)=>{i.r(F),i.d(F,{AuthenticatedUserModule:()=>H});var p=i(177),c=i(4341),h=i(6157),u=i(5134),m=i(2655),d=i(9658),t=i(4438),g=i(5608);function S(e,l){if(1&e){const n=t.RV6();t.j41(0,"li")(1,"a",11),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onLogout())}),t.EFF(2,"Logout"),t.k0s()()}}function I(e,l){if(1&e){const n=t.RV6();t.j41(0,"li")(1,"a",11),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.onLogout())}),t.EFF(2,"Logout"),t.k0s()()}}let T=(()=>{class e{constructor(n){this.authService=n,this.userIsAuthenticated=!1}ngOnInit(){this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(n=>{this.userIsAuthenticated=n})}ngOnDestroy(){this.authListenerSubs.unsubscribe()}onLogout(){this.authService.logout()}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(g.u))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-authenticated-header"]],decls:15,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","mydropnav"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","mydropnav","bg-dark"],[4,"ngIf"],["routerLink","authenticated-user/user-profile","href","#",1,"dropdown-item","bg-dark"],["href","#",1,"nav-link",3,"click"]],template:function(r,o){1&r&&(t.j41(0,"nav",0)(1,"div",1)(2,"button",2),t.nrm(3,"span",3),t.k0s(),t.j41(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t.EFF(8," JWT Experiment "),t.k0s(),t.j41(9,"ul",8),t.DNE(10,S,3,0,"li",9),t.j41(11,"li")(12,"a",10),t.EFF(13,"Profile"),t.k0s()()()(),t.DNE(14,I,3,0,"li",9),t.k0s()()()()),2&r&&(t.R7$(10),t.Y8G("ngIf",o.userIsAuthenticated),t.R7$(4),t.Y8G("ngIf",o.userIsAuthenticated))},dependencies:[p.bT,m.Wk]})}return e})(),U=(()=>{class e{constructor(n){this.authService=n,this.userIsAuthenticated=!1}ngOnInit(){this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(n=>{this.userIsAuthenticated=n})}ngOnDestroy(){this.authListenerSubs.unsubscribe()}onLogout(){this.authService.logout()}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(g.u))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-authenticated-footer"]],decls:23,vars:0,consts:[[1,"mt-5"],[1,"bg-dark","text-center","text-lg-start"],[1,"container","p-4","pb-0"],[1,""],[1,"row"],[1,"col-md-3","col-lg-3","col-xl-3","mx-auto","mt-3"],[1,"text-uppercase","mb-4","font-weight-bold"],[1,"w-100","clearfix","d-md-none"],[1,"col-md-2","col-lg-2","col-xl-2","mx-auto","mt-3"],["routerLink","/authenticated-user/user-profile","href","#"],["href","#",1,"nav-link",3,"click"],[1,"col-md-3","col-lg-2","col-xl-2","mx-auto","mt-3"],[1,"my-3"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"footer",1)(2,"div",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"h6",6),t.EFF(7," JWT Angular "),t.k0s(),t.j41(8,"p"),t.EFF(9,"This is boilerplate for using Angular Refreshing Tokens"),t.k0s()(),t.nrm(10,"hr",7),t.j41(11,"div",8)(12,"h6",6),t.EFF(13,"JWT Angular Boilerplate"),t.k0s(),t.j41(14,"p")(15,"a",9),t.EFF(16,"Profile"),t.k0s()(),t.j41(17,"p")(18,"a",10),t.bIt("click",function(){return o.onLogout()}),t.EFF(19,"Logout"),t.k0s()()(),t.nrm(20,"hr",7)(21,"div",11),t.k0s()(),t.nrm(22,"hr",12),t.k0s()()())},dependencies:[m.Wk]})}return e})(),_=(()=>{class e{constructor(n){this.store=n}ngOnInit(){console.log("initializing the authenticated user component now..."),this.store.dispatch(new d.z3)}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(u.il))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-authenticated-user"]],decls:5,vars:0,consts:[[1,"container","content"],[1,"color-frame","rounded"]],template:function(r,o){1&r&&(t.nrm(0,"app-authenticated-header"),t.j41(1,"div",0)(2,"div",1),t.nrm(3,"router-outlet"),t.k0s()(),t.nrm(4,"app-authenticated-footer"))},dependencies:[m.n3,T,U]})}return e})();const x=(0,u.UX)("user"),P=(0,u.Mz)(x,e=>e.usrProfile);function A(e,l){1&e&&(t.j41(0,"div"),t.EFF(1,"Please enter an email."),t.k0s())}function $(e,l){1&e&&(t.j41(0,"div"),t.EFF(1,"Please enter your surname."),t.k0s())}function w(e,l){1&e&&(t.j41(0,"div"),t.EFF(1,"Please enter your given name."),t.k0s())}let L=(()=>{class e{constructor(n){this.store=n,this.closeEvent=new t.bkB}ngOnInit(){}onSubmitEditedProfile(n){if(n.invalid)return n.reset(),void this.closeEvent.emit(!1);this.store.dispatch(new d.e6({submissionForm:{contact_email:n.value.contact_email,given_name:n.value.given_name,surname:n.value.surname}})),n.resetForm(),this.closeEvent.emit(!1)}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(u.il))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-edit-profile-form"]],inputs:{profile:"profile"},outputs:{closeEvent:"closeEvent"},decls:27,vars:6,consts:[["profileForm","ngForm"],["contact_email","ngModel"],["surname","ngModel"],["given_name","ngModel"],[3,"submit"],["name","contact_email","type","email","required","","text","","minlength","5","ngModel","",1,"form-control",3,"placeholder"],[4,"ngIf"],["type","text","minlength","2","rows","4","name","surname","ngModel","","required","",1,"form-control",3,"placeholder"],["type","text","minlength","3","rows","4","name","given_name","ngModel","","required","",1,"form-control",3,"placeholder"],["type","submit",1,"btn","btn-outline-secondary"]],template:function(r,o){if(1&r){const a=t.RV6();t.j41(0,"form",4,0),t.bIt("submit",function(){t.eBV(a);const v=t.sdS(1);return t.Njj(o.onSubmitEditedProfile(v))}),t.j41(2,"div")(3,"label"),t.EFF(4,"Email"),t.k0s(),t.nrm(5,"input",5,1),t.DNE(7,A,2,0,"div",6),t.k0s(),t.nrm(8,"br"),t.j41(9,"div")(10,"label"),t.EFF(11,"Surname"),t.k0s(),t.nrm(12,"input",7,2),t.DNE(14,$,2,0,"div",6),t.k0s(),t.nrm(15,"br"),t.j41(16,"div")(17,"label"),t.EFF(18,"Given Name"),t.k0s(),t.nrm(19,"input",8,3),t.DNE(21,w,2,0,"div",6),t.k0s(),t.nrm(22,"hr"),t.j41(23,"div")(24,"button",9),t.EFF(25,"Submit"),t.k0s()(),t.nrm(26,"br"),t.k0s()}if(2&r){const a=t.sdS(6),s=t.sdS(13),v=t.sdS(20);t.R7$(5),t.FS9("placeholder",o.profile.contact_email),t.R7$(2),t.Y8G("ngIf",a.touched&&a.invalid),t.R7$(5),t.FS9("placeholder",o.profile.surname),t.R7$(2),t.Y8G("ngIf",s.touched&&s.invalid),t.R7$(5),t.FS9("placeholder",o.profile.given_name),t.R7$(2),t.Y8G("ngIf",v.touched&&v.invalid)}},dependencies:[p.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.xh,c.vS,c.cV]})}return e})();function M(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),t.EFF(4),t.nI1(5,"uppercase"),t.k0s()(),t.nrm(6,"hr"),t.j41(7,"table",4)(8,"tr")(9,"th")(10,"h3"),t.EFF(11,"Name"),t.k0s()(),t.j41(12,"td")(13,"h3"),t.EFF(14),t.k0s()()(),t.j41(15,"tr")(16,"th")(17,"h3"),t.EFF(18,"Email"),t.k0s()(),t.j41(19,"td")(20,"h3"),t.EFF(21),t.k0s()()()(),t.nrm(22,"hr"),t.j41(23,"div",5)(24,"button",6),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.toggleForm())}),t.EFF(25),t.k0s()(),t.nrm(26,"hr"),t.j41(27,"div",7)(28,"app-edit-profile-form",8),t.bIt("closeEvent",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.closeFormHander(o))}),t.k0s()(),t.nrm(29,"br"),t.k0s()()}if(2&e){const n=l.ngIf,r=t.XpG();t.R7$(4),t.Lme("Profile of: ",t.bMT(5,8,n.user.username[0]),"",n.user.username.substring(1),""),t.R7$(10),t.Lme(" ",n.given_name," ",n.surname," "),t.R7$(7),t.JRh(n.contact_email),t.R7$(4),t.SpI(" ",r.showForm?"No thanks, I'll Edit My Profile Later":"Edit Profile"," "),t.R7$(2),t.Y8G("hidden",!r.showForm),t.R7$(),t.Y8G("profile",n)}}const R=[{path:"",component:_,children:[{path:"user-profile",component:(()=>{class e{constructor(n){this.store=n,this.showForm=!1}ngOnInit(){console.log("initializing the profile component now..."),this.usrProfile$=this.store.pipe((0,u.Lt)(P))}toggleForm(){this.showForm=!this.showForm}closeFormHander(n){this.showForm=n}static#t=this.\u0275fac=function(r){return new(r||e)(t.rXU(u.il))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-user-profile"]],decls:3,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"table-responsive"],[1,"container","mt-1","pt-1"],[1,"profile-table",2,"width","100%"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[3,"hidden"],[3,"closeEvent","profile"]],template:function(r,o){1&r&&(t.j41(0,"div"),t.DNE(1,M,30,10,"div",0),t.nI1(2,"async"),t.k0s()),2&r&&(t.R7$(),t.Y8G("ngIf",t.bMT(2,1,o.usrProfile$)))},dependencies:[p.bT,L,p.Jj,p.Pc],styles:["h1[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{border:1px solid #758d97;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;border-bottom:1pt solid #758d97;padding:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1em}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;padding:1em}hr.thick-or[_ngcontent-%COMP%]{border:2px solid #cb410b}hr.thin-white[_ngcontent-%COMP%]{border:1px solid white}"]})}return e})()},{path:"**",redirectTo:"/user-profile"}]}];let O=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[m.iI.forChild(R),m.iI]})}return e})();var k=i(8810),V=i(3993),G=i(5964),E=i(1397),f=i(6354),j=i(9437),b=i(1626),C=i(5312);let N=(()=>{class e{constructor(n,r){this.http=n,this.authService=r}fetchUserProfile(){let n=this.authService.getAuthToken();return this.http.get(`${C.c.apiUrl}/api/profiles/user-profile/`,{headers:new b.Lr({Authorization:`Token ${n}`})}).pipe((0,f.T)(r=>r))}editUserProfile(n){let r=this.authService.getAuthToken();return this.http.patch(`${C.c.apiUrl}/api/profiles/user-profile/`,n,{headers:new b.Lr({Authorization:`Token ${r}`})}).pipe((0,f.T)(o=>o))}static#t=this.\u0275fac=function(r){return new(r||e)(t.KVO(b.Qq),t.KVO(g.u))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),B=(()=>{class e{constructor(n,r,o){this.actions$=n,this.userService=r,this.store=o,this.loadUserProfile$=(0,h.EH)(()=>this.actions$.pipe((0,h.gp)(d.Kp.UserProfileRequested),(0,V.E)(this.store.pipe((0,u.Lt)(P))),(0,G.p)(([a,s])=>!s),(0,E.Z)(a=>this.userService.fetchUserProfile().pipe((0,f.T)(s=>new d.u1({usrProfile:s})),(0,j.W)(s=>(0,k.$)(()=>s)))))),this.submitEditedProfile$=(0,h.EH)(()=>this.actions$.pipe((0,h.gp)(d.Kp.UserProfileSubmitted),(0,E.Z)(a=>this.userService.editUserProfile(a.payload.submissionForm).pipe((0,f.T)(s=>new d.ko({usrProfile:s})),(0,j.W)(s=>(0,k.$)(()=>s))))))}static#t=this.\u0275fac=function(r){return new(r||e)(t.KVO(h.En),t.KVO(N),t.KVO(u.il))};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}return e})();const y={userProfileLoaded:!1,usrProfile:void 0};function D(e=y,l){switch(l.type){case d.Kp.UserProfileCleared:return y;case d.Kp.UserProfileLoaded:case d.Kp.UserProfileSaved:return{userProfileLoaded:!0,usrProfile:l.payload.usrProfile};default:return e}}let H=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[p.MD,c.YN,O,u.md.forFeature("user",D),h.Vm.forFeature([B])]})}return e})()}}]);